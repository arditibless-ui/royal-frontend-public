@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --safe-area-top: max(env(safe-area-inset-top), 8px);
  --safe-area-bottom: max(env(safe-area-inset-bottom), 8px);
  --safe-area-left: max(env(safe-area-inset-left), 8px);
  --safe-area-right: max(env(safe-area-inset-right), 8px);
  
  /* Dynamic scaling based on viewport */
  --vw-scale: 1vw;
  --vh-scale: 1vh;
  --vmin-scale: 1vmin;
}

body {
  font-family: Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 0;
  overflow: auto;
  touch-action: manipulation;
}

html {
  overflow: auto;
}

/* Container query for poker table - adapts to parent container */
.poker-table-wrapper {
  container-type: size;
  container-name: poker-container;
  width: 100%;
  min-height: 100vh;
  position: relative;
}

/* Dynamic scaling based on container dimensions - Table smaller, players normal size */
@container poker-container (max-height: 400px) {
  .poker-table-surface {
    transform: scale(0.5);
    transform-origin: center center;
  }
  
  .player-position {
    transform: scale(1.0) !important;
  }
  
  .pot-display {
    transform: scale(0.8) !important;
  }
  
  .header-controls {
    font-size: clamp(8px, 1.5cqw, 10px) !important;
  }
}

@container poker-container (min-height: 401px) and (max-height: 500px) {
  .poker-table-surface {
    transform: scale(0.6);
    transform-origin: center center;
  }
  
  .player-position {
    transform: scale(1.0) !important;
  }
  
  .pot-display {
    transform: scale(0.85) !important;
  }
}

@container poker-container (min-height: 501px) and (max-height: 700px) {
  .poker-table-surface {
    transform: scale(0.7);
    transform-origin: center center;
  }
  
  .player-position {
    transform: scale(1.0) !important;
  }
}

@container poker-container (min-height: 701px) {
  .poker-table-surface {
    transform: scale(1);
  }
}

/* Responsive text using container query units */
.responsive-text {
  font-size: clamp(10px, 2cqw, 16px);
}

/* Safe area borders - visible guide for content placement */
.safe-area-border {
  position: fixed;
  inset: var(--safe-area-top) var(--safe-area-right) var(--safe-area-bottom) var(--safe-area-left);
  border: 2px dashed rgba(255, 215, 0, 0.3);
  border-radius: 12px;
  pointer-events: none;
  z-index: 9999;
}

/* Hide safe area border on larger screens */
@media (min-width: 769px) {
  .safe-area-border {
    display: none;
  }
}

/* Prevent overlapping UI elements */
.header-section {
  padding: var(--safe-area-top) var(--safe-area-right) 8px var(--safe-area-left);
}

.bottom-controls {
  padding: 8px var(--safe-area-right) var(--safe-area-bottom) var(--safe-area-left);
}

/* Portrait orientation warning */
@media (orientation: portrait) and (max-width: 768px) {
  .portrait-warning {
    display: flex !important;
  }
  .landscape-content {
    display: none !important;
  }
}

/* Landscape optimizations with dynamic viewport units */
@media (orientation: landscape) and (max-height: 500px) {
  :root {
    --table-scale: clamp(0.6, 80vh, 1);
  }
  
  .poker-table-container {
    min-height: 100vh;
    overflow: visible;
  }
  
  /* Hide less important UI elements on very small screens - REMOVED current-bet-indicator hiding */
  
  .action-log {
    max-width: 80px !important;
    font-size: clamp(6px, 1.2vh, 8px) !important;
  }
}

/* Ultra-responsive layout using CSS Grid */
.poker-grid-layout {
  display: grid;
  grid-template-rows: auto 1fr auto;
  min-height: 100vh;
  gap: clamp(4px, 1vh, 12px);
}

/* Fluid spacing system */
.fluid-padding {
  padding: clamp(4px, 1vmin, 16px);
}

.fluid-gap {
  gap: clamp(2px, 0.5vmin, 8px);
}

/* Adaptive button sizing */
.adaptive-button {
  padding: clamp(4px, 1vh, 8px) clamp(8px, 2vw, 16px);
  font-size: clamp(9px, 1.5vmin, 14px);
}

/* Prevent layout shift */
* {
  box-sizing: border-box;
}

/* Landscape mode utilities for all pages */
@media (orientation: landscape) and (max-height: 700px) {
  /* Make headers more compact in landscape */
  .dashboard-header {
    padding: clamp(8px, 2vh, 24px) !important;
  }
  
  /* Reduce spacing in lists/grids */
  .room-grid, .user-grid {
    gap: clamp(8px, 1.5vh, 16px) !important;
  }
  
  /* Make modals more compact */
  .modal-content {
    max-height: 85vh !important;
    overflow-y: auto !important;
  }
  
  /* Compact table rows */
  .data-table td, .data-table th {
    padding: clamp(4px, 1vh, 12px) !important;
  }
  
  /* Ensure all notifications stay centered */
  .fixed.top-6 {
    top: clamp(8px, 2vh, 24px) !important;
  }
}

/* Very small landscape screens */
@media (orientation: landscape) and (max-height: 500px) {
  .notification-toast {
    top: 8px !important;
    font-size: 12px !important;
    padding: 8px 12px !important;
  }
  
  /* All fixed notifications centered for small landscape */
  .fixed.top-6.left-1\/2 {
    top: 12px !important;
    max-width: 90vw !important;
  }
  
  body {
    font-size: 14px !important;
  }
}

/* Center all notifications on mobile landscape */
@media (max-width: 768px) and (orientation: landscape) {
  /* Force all notifications to be centered */
  [class*="fixed"][class*="top-"] {
    left: 50% !important;
    transform: translateX(-50%) !important;
    max-width: 90vw !important;
  }
  
  /* Specific targeting for notification containers */
  .fixed.top-6,
  .fixed.top-16,
  .fixed.top-20 {
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) translateY(0) !important;
  }
  
  /* Ensure notification content doesn't overflow */
  .fixed.top-6 > div,
  .fixed.top-16 > div,
  .fixed.top-20 > div {
    max-width: 90vw !important;
    margin: 0 auto !important;
  }
}

/* Also handle portrait mobile */
@media (max-width: 768px) and (orientation: portrait) {
  .fixed.top-6,
  .fixed.top-16,
  .fixed.top-20 {
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) translateY(0) !important;
    max-width: 90vw !important;
  }
}

/* Additional mobile landscape rules */
@media (orientation: landscape) and (max-width: 932px) {
  .fixed.top-6 {
    left: 50% !important;
    right: auto !important;
    transform: translateX(-50%) !important;
  }
}

img, video {
  max-width: 100%;
  height: auto;
}

/* Smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Safe area for bottom buttons - prevents overlap */
.pb-safe {
  padding-bottom: var(--safe-area-bottom);
}

/* Poker table container - no extra padding needed with vertical buttons */
.poker-table-container {
  padding-bottom: 0;
}

@media (min-width: 768px) {
  .poker-table-container {
    padding-bottom: 200px;
  }
}

/* Raise Slider Styling */
.slider-thumb::-webkit-slider-thumb {
  appearance: none;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(249, 115, 22, 0.5);
  border: 2px solid white;
  transition: all 0.2s ease;
}

.slider-thumb::-webkit-slider-thumb:hover {
  transform: scale(1.2);
  box-shadow: 0 4px 12px rgba(249, 115, 22, 0.7);
}

.slider-thumb::-webkit-slider-thumb:active {
  transform: scale(1.1);
}

.slider-thumb::-moz-range-thumb {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
  cursor: pointer;
  box-shadow: 0 2px 8px rgba(249, 115, 22, 0.5);
  border: 2px solid white;
  transition: all 0.2s ease;
}

.slider-thumb::-moz-range-thumb:hover {
  transform: scale(1.2);
  box-shadow: 0 4px 12px rgba(249, 115, 22, 0.7);
}

.slider-thumb::-moz-range-thumb:active {
  transform: scale(1.1);
}
